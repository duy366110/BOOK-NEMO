<%- include("../../../components/head-component.ejs") %>
<link rel="stylesheet" href="/css/components/page-admin-new-product.css">
</head>
<body>
    <main>
        <%- include("../../../components/header-component.ejs") %>

        <div class="component-wrapper">
            <div class="container">
                <form class="form-container" action="/product/edit?_csrf=<%= csurfToken %>" method="post" novalidate enctype="multipart/form-data">
                    <div class="form-group">
                        <label class="form-label" for="title">Tên sản phẩm</label>
                        <input
                            class="<%= inputsErrors.find((elm)=> elm.path === 'title')? 'form-control is-invalid' : 'form-control' %>"
                            type="text" name="title"
                            id="title" value="<%= product? product.title : '' %>">

                            <% if(inputsErrors.some((elm)=> elm.path === 'title')) { %>
                                <small class="input-message"><%= inputsErrors.find((elm) => elm.path === 'title')?.msg %></small>
                            <% } %>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="image">Ảnh sản phẩm</label>
                        <input
                            class="<%= inputsErrors.find((elm)=> elm.path === 'image')? 'form-control form-control-file is-invalid' : 'form-control form-control-file' %>"
                            type="file" name="image"
                            id="image">

                            <% if(inputsErrors.some((elm)=> elm.path === 'image')) { %>
                                <small class="input-message"><%= inputsErrors.find((elm) => elm.path === 'image')?.msg %></small>
                            <% } %>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="price">Giá sản phẩm</label>
                        <input
                            class="<%= inputsErrors.find((elm)=> elm.path === 'price')? 'form-control is-invalid' : 'form-control' %>"
                            type="number" name="price"
                            id="price" step="0.01" value="<%= product? product.price : '' %>">

                            <% if(inputsErrors.some((elm)=> elm.path === 'price')) { %>
                                <small class="input-message"><%= inputsErrors.find((elm) => elm.path === 'price')?.msg %></small>
                            <% } %>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="description">Mô tả</label>
                        <textarea
                            class="<%= inputsErrors.find((elm)=> elm.path === 'description')? 'form-control is-invalid' : 'form-control' %>"
                            name="description" id="description" rows="5"><%= product? product.description : '' %></textarea>

                        <% if(inputsErrors.some((elm)=> elm.path === 'description')) { %>
                            <small class="input-message"><%= inputsErrors.find((elm) => elm.path === 'description')?.msg %></small>
                        <% } %>
                    </div>

                    <input type="hidden" name="product" value="<%= product? product._id : '' %>">
                    <button type="submit" class="btn">Lưu thay đổi</button>
                </form>
            </div>
        </div>
    </main>

<%- include("../../../components/footer-component.ejs") %>